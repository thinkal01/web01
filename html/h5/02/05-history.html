<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>History Api</title>
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            overflow: hidden;
            padding: 0
        }

        aside {
            background-color: #e0e0e0;
            float: left;
            height: 100%;
            width: 220px;
        }

        article {
            background-color: #f5f5f5;
            height: 100%;
            margin-left: 220px;
            padding: 20px;
            overflow: scroll;
        }

        article > p {
            line-height: 2;
            font-size: 20px;
        }

        ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        ul > li {
            font-size: 18px;
            line-height: 50px;
            margin: 5px 0;
            text-align: center;
            cursor: pointer;
        }

        ul > li::before {
            content: 'ðŸ‹';
            margin-right: 5px;
        }

        ul > li:hover {
            background-color: #c0c0c0;
        }
    </style>
</head>

<body>
<aside>
    <ul id="list" data-id="1" data-name="sss">
    </ul>
</aside>
<article>
    <p id="content"></p>
</article>
<!-- plugin:auto file name -->
<script src="data.js"></script>
<script>
    (function () {
        var listElement = document.querySelector('#list');
        for (var title in data) {
            var liElement = document.createElement('li');
            liElement.innerHTML = 'â­ï¸' + title;
            liElement.setAttribute('data-title', title);
            listElement.appendChild(liElement);
        }

        var liElements = document.querySelectorAll('#list>li');
        var content = document.querySelector('#content');

        // æ³¨å†Œå…ƒç´ äº‹ä»¶
        for (var i = 0; i < liElements.length; i++) {
            liElements[i].addEventListener('click', function () {
                // æ‹¿åˆ°è¢«ç‚¹å‡»title
                var title = this.dataset['title'];
                // èµ‹å€¼
                content.innerHTML = data[title];
                // æ“ä½œåŽ†å²è®°å½•
                if (window.history && history.pushState) {
                    // æ·»åŠ ä¸€ä¸ªæ–°çš„åŽ†å²è®°å½•
                    history.pushState(title, 'titleæ²¡æœ‰ä»»ä½•æµè§ˆå™¨æ”¯æŒ', '?t=' + title);
                } else {
                    console.log('ä¸æ”¯æŒ');
                }
            });
        }

        // å½“æˆ‘ä»¬åœ¨ä¼ªé€ çš„è®¿é—®åŽ†å²ä¸­å‰è¿›æˆ–åŽé€€æ—¶ä¼šæ‰§è¡Œä¸€ä¸ªpopstateäº‹ä»¶
        window.addEventListener('popstate', function (e) {
            content.innerHTML = data[e.state];
        });

        // window.location = "https://www.baidu.com";
        // ç¬¬ä¸€æ¬¡è¯·æ±‚è¿‡æ¥ èŽ·å–åœ°å€æ ä¸­çš„tå‚æ•°
        // window.locationå¯ä»¥æ‹¿åˆ°å½“å‰ç½‘é¡µä¸­è·Ÿåœ°å€ç›¸å…³çš„ä¿¡æ¯
        var search = window.location.search; // ?t=jkaljdksfla
        // å¦‚æžœåœ°å€æ ä¸­çš„åœ°å€æœ‰ä¸­æ–‡ï¼Œä¼šä»¥URLç¼–ç æ–¹å¼å‘ˆçŽ°
        // decodeURI å¯ä»¥è½¬æ¢åˆ°ä¹‹å‰ä¸­æ–‡
        var title = search.split('=')[1]; // ['?t','jkaljdksfla']
        if (title) {
            // æœ‰å€¼ decodeURIä½œç”¨å°±æ˜¯ä»ŽURLç¼–ç è½¬æ¢åˆ°ä¹‹å‰çš„çŠ¶æ€
            console.log(decodeURI(title));
            content.innerHTML = data[decodeURI(title)];
        }
    })();
</script>
</body>

</html>
